L1=0.5*10^(-3);
L2=0.6*10^(-3);
rl1=0.005;
rl2=0.006;
Voc1=374.42;
r01=137*10^(-3);
rp1=11.16*10^(-3);
Cp1=1332;
rc=0.001;
C=1000*10^(-6);
Voc2=495;
r02=87.68*10^(-3);
rp2=8.02*10^(-3);
Cp2=1768.8;
% R=2.23;
d=0.4954;
vc=867;
il1=314;
il2=300;
A=[((-rl1-r01+(rc*(d-1)))/L1) 0 (d-1)/L1 -1/L1 0 ;0 (-r02-(rc*d)-rl2)/L2  -d/L2  0 -1/L2; ((1-d)/C) d/C 0 0 0; 1/Cp1 0  0 -(1/(rp1*Cp1)) 0; 0 1/Cp2 0 0 -(1/(rp2*Cp2))];
B=[(rc*il1+vc)/L1; (-(rc*il2)-vc)/L2; (-il1+il2)/C; 0; 0];
c=[1 0 0 0 0];
D=0;
s=sym('s');
I=eye(5);
z=s*I-A;
T1=(c*inv(z)*B);
[num, den] = numden(T1);
T2=simplify(T1);
[num2, den2] = numden(T2);
grid on;
% ltiSys = ss(A,B,c,D);
% sys = tf(ltiSys);
%  grid on;
% Kp =0.0013;
%  Ki =0.14031;
%  C = tf([Kp Ki], [1 0]);
% ol20=minreal(((sys))*C);
%  cl20 = feedback(ol20, 1);
%  bode(cl20)
%  [GM, PM, Wgc, Wpc] = margin(cl20);
%  margin(cl20)
% bw = bandwidth(cl20);